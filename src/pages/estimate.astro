---
export const prerender = true
import Layout from "../layouts/Layout.astro";
import LeftArrow from "../components/LeftArrow.astro";
---

<Layout title="AlphaTree">
	<main class="m-auto p-8 max-w-screen-lg">
		<LeftArrow url="/" />

		<center><p>Thank you for choosing AlphaTree Service.</p></center>
		<center
			><p class="mb-5">Please provide your contact information.</p>
		</center>

		<form class="mx-auto" action="" method="get">
			<center><label for="estiname">Name:</label></center>
			<input
				class="text-white input[type='text'] bg-slate-600 rounded-lg h-8 w-full"
				type="text"
				id="estiname"
				name="estiname"
				placeholder="Herman Munster"
			/>

			<div class="flex flex-row">
				<div class="basis-1/2 pr-1">
					<div class="flex flex-col">
						<label for="estiaddress">Address:</label>
						<input
							class="text-white input[type='text'] bg-slate-600 rounded-lg h-8 w-full"
							type="text"
							id="estiaddress"
							name="estiaddress"
							placeholder="1313 Mockingbird Ln"
						/>
					</div>
				</div>

				<div class="basis-1/2 pr-1">
					<div class="flex flex-col">
						<label for="esticity">City:</label>
						<input
							class="text-white input[type='text'] bg-slate-600 rounded-lg h-8 w-full"
							type="text"
							id="esticity"
							name="esticity"
							placeholder="Mockingbird Heights"
						/>
					</div>
				</div>
			</div>

			<div class="flex flex-row">
				<div class="basis-1/2 pr-1">
					<div class="flex flex-col">
						<label for="estitelephone">Telephone:</label>
						<input
							class="text-white input[type='tel'] bg-slate-600 rounded-lg h-8 w-full"
							type="tel"
							id="estitelephone"
							name="estitelephone"
							pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
							placeholder="505-555-1234"
						/>
					</div>
				</div>
				<div class="basis-1/2 pl-1">
					<div class="flex flex-col">
						<label for="estiemail">Email:</label>
						<input
							class="text-white input[type='email'] bg-slate-600 rounded-lg h-8 w-full"
							type="email"
							id="estiemail"
							name="estiemail"
							placeholder="herman@gmail.com"
						/>
					</div>
				</div>
			</div>
			<center
				><label for="estireqservdate">Date Of Service:</label>
			</center>
			<center
				><input
					class="text-white bg-slate-600 rounded-lg h-8 w-full"
					type="date"
					id="estireqservdate"
					name="estireqservdate"
				/>
			</center>

			<center
				><label for="esticomment">Describe The Problem:</label>
			</center>
			<center>
				<textarea
					class="text-white bg-slate-600 h-44 rounded-lg h-8 w-full"
					id="esticomment"
					name="esticomment"></textarea>
			</center><br /><br />

			<center
				><label for="estiphoto">Select A Pic/Vid To Upload</label>
			</center>
			<center
				><input
					class="mt-4 mb-5 text-white bg-slate-600"
					type="file"
					id="estiphoto"
					name="estiphoto"
				/>
			</center>
		</form>

		<center>
			<div>
				<a href="/">
					<button
						class="mt-5 mb-5 bg-slate-600 h-14 w-1/2 text-white rounded-lg"
						type="button"
						id="estisub"
						name="estisub"
					>
						Submit
					</button>
				</a>
			</div>
		</center>
	</main>
</Layout>

<script>
	const name = document.querySelector('input[name="estiname"]');
	const address = document.querySelector('input[name="estiaddress"]');
	const city = document.querySelector('input[name="esticity"]');
	const telephone = document.querySelector('input[name="estitelephone"]');
	const email = document.querySelector('input[name="estiemail"]');
	const reqservdate = document.querySelector('input[name="estireqservdate"]');
	const comment = document.querySelector('input[name="esticomment"]');
	const photo = document.querySelector('input[name="estiphoto"]');
	const button = document.querySelector("button#estisub");

	button.addEventListener("click", () => {
		const u = "http://192.168.0.90:9090/newestreq?est=";
		const r =
			name.value +
			"/" +
			address.value +
			"/" +
			city.value +
			"/" +
			telephone.value +
			"/";
		const l =
			email.value +
			"/" +
			reqservdate.value +
			"/" +
			comment.value +
			"/" +
			photo.value;
		const url = u + r + l;
		const URL = encodeURI(url);
		console.log(URL);
		fetch(URL);
	});
</script>

<style>
	:root {
		--astro-gradient: linear-gradient(0deg, #4f39fa, #da62c4);
	}

	.text-gradient {
		font-weight: 900;
		background-image: var(--astro-gradient);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-size: 100% 200%;
		background-position-y: 100%;
		border-radius: 0.4rem;
		animation: pulse 4s ease-in-out infinite;
	}

	@keyframes pulse {
		0%,
		100% {
			background-position-y: 0%;
		}
		50% {
			background-position-y: 80%;
		}
	}
</style>
