---
export const prerender = true
import Layout from "../../layouts/Layout.astro";
import LeftArrow from "../../components/LeftArrow.astro";
---

<Layout title="AdminSignIn">
    <main class="m-auto p-8 max-w-screen-lg">
        <center><h1 class="text-white text-5xl">Admin LogIn</h1></center>
        <LeftArrow url="/admin/signin" />
        <!-- <center><h1 class="m-8"><span class="text-gradient">360 516 8933</span></h1></center> -->

        <form class="mx-auto" action="" method="get">
            <center><label for="admintoken">Admin Token:</label></center>
            <center
                ><input
                    class="input[type='text'] text-white bg-slate-600 rounded-lg h-10 w-9/12"
                    type="text"
                    id="admintoken"
                    name="admintoken"
                />
            </center>

            <br /><br />

            <center><label for="email">Email:</label></center>
            <center
                ><input
                    class="input[type='text'] text-white bg-slate-600 rounded-lg h-10 w-9/12"
                    type="text"
                    id="email"
                    name="email"
                />
            </center>

            <br /><br />

            <center><label for="pwd">Password:</label></center>
            <center
                ><input
                    class="input[type='text'] text-white bg-slate-600 rounded-lg h-10 w-9/12"
                    type="text"
                    id="pwd"
                    name="pwd"
                />
            </center>

            <br /><br />

            <center>
                <button
                    class="bg-slate-600 h-14 w-44 text-white rounded-lg"
                    type="button"
                    id="adminlogin"
                >
                    Submit
                </button>
            </center>

            <br /><br />
        </form>
    </main>
</Layout>

<script>
    const admintoken = document.querySelector('input[name="admintoken"]');
    const email = document.querySelector('input[name="email"]');
    const password = document.querySelector('input[name="pwd"]');
    const button = document.querySelector("button#adminlogin");
    button.addEventListener("click", () => {
        // creditials need to be encripted before sending them over the Wire
        // currently cryptojs is failing to build once it builds again implement
        // encription
        const u = "http://192.168.0.90:9090/adminsignin?creds=";
        const r = email.value + "/" + password.value + "/" + admintoken.value;
        const url = u + r;
        const URL = encodeURI(url);
        fetch(URL);
    });
</script>
